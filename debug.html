
Enter the URL you want to verify in the input field.
Click the "Verify URL" button.
Wait for the analysis to complete and view the results.
Use the preview and source code buttons for further inspection."
 SAME FOR THESE ONE SHOULD BE WELL DESIGN AND AND EDUCATIVE AND PROVIDE A SECTION FOR THESE "Tips to Avoid Phishing Attacks
 Always verify the sender's email address.
 Look for grammatical errors or unusual language in emails.
 Avoid clicking on links in unsolicited emails.
 Use trusted security software to scan your emails and websites.
 Regularly update your passwords and use two-factor authentication." AND THE OTHER SIDE OF THE PAGE A VIDEO PROVIDING AVAVISE ON USERS FOR PROTECTING AGAINST PHISPHING
<!DOCTYPE html>THESE ONE SHOULD BE ON ANOTHER PAGE BUT LINK "Educational Resources
Learn more about phishing attacks and how to protect yourself:

How to Avoid Phishing Scams (Video)
Tips to Avoid Phishing Attacks (Video)
Google's Guide on How to Avoid Phishing
Microsoft's Tips for Avoiding Phishing Scams
Phishing.org's Guide to Phishing" A VIDEOS WELL DESIGN AND WELL STYLE IN APPERANCE AND WELL LOADING AND ALSO ARTICES 

ALSO PROVIDE ANY FANCY WELL DESIGN UI FOR MY PHISPHING Attack PREDICTION SYSTEM
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/style.css') }}" />
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    <script src="{{ url_for('static', filename='js/scripts.js') }}" defer></script>
    <title>Phishing Attack Prediction System</title>
    <meta name="description" content="These system is a phishing domain detection tool created by Dev. This allows you to safely view the website without visiting it.">
    <meta name="og:title" property="og:title" content="Phishing Attack Prediction System by Dev">

    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}">
    <link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='favicon-32x32.png') }}">
    <link rel="icon" type="image/png" sizes="16x16" href="{{ url_for('static', filename='favicon-16x16.png') }}">
    <link rel="apple-touch-icon" sizes="180x180" href="{{ url_for('static', filename='apple-touch-icon.png') }}">
    <link rel="manifest" href="{{ url_for('static', filename='site.webmanifest') }}">
</head>

<body>

    {% block content %}{% endblock %} {% if '/preview' not in request.path %}
    <div class="app-footer">
        <a href="https://github.com/dev" target="_blank" rel="noopener"><strong>GitHub code</strong></a> <br>
        <span> &nbsp;ðŸ‘€&nbsp; </span> Created by&nbsp; <br>
        <a href="https://abhishekkp.com/" target="_blank" rel="noopener"> <strong>Phishing Attack Prediction System</strong></a>
    </div>
    {% endif %}

</body>

</html>
{% extends "base.html" %}
<!DOCTYPE html>
<html>

<body>

    {% block content %}

    <div class="container">

        <a href="/" class="logo">
            <h1 itemprop="name">Phishing Attack Prediction System</h1>
        </a>

        <div class="short-note">
            <p itemprop="description">Protect yourself from <strong>phishing attacks</strong> with the help of <strong>Our New System</strong>. Surf safe with the web <strong>Phishing Attack Prediction System</strong>.</p>
        </div>
        <div class="instructions">
            <h2>How to Use SafeSurf</h2>
            <ol>
                <li>Enter the URL you want to verify in the input field.</li>
                <li>Click the "Verify URL" button.</li>
                <li>Wait for the analysis to complete and view the results.</li>
                <li>Use the preview and source code buttons for further inspection.</li>
            </ol>
        </div>
    
        <div class="tips">
            <h2>Tips to Avoid Phishing Attacks</h2>
            <ul>
                <li>Always verify the sender's email address.</li>
                <li>Look for grammatical errors or unusual language in emails.</li>
                <li>Avoid clicking on links in unsolicited emails.</li>
                <li>Use trusted security software to scan your emails and websites.</li>
                <li>Regularly update your passwords and use two-factor authentication.</li>
            </ul>
        </div>
    
        <div class="educational-resources">
            <h2>Educational Resources</h2>
            <p>Learn more about phishing attacks and how to protect yourself:</p>
            <ul>
                <li><a href="https://www.youtube.com/watch?v=aeRqwUruPh8" target="_blank">How to Avoid Phishing Scams (Video)</a></li>
                <li><a href="https://www.youtube.com/watch?v=F-VH9p0yM7A" target="_blank">Tips to Avoid Phishing Attacks (Video)</a></li>
                <li><a href="https://support.google.com/mail/answer/8253?hl=en" target="_blank">Google's Guide on How to Avoid Phishing</a></li>
                <li><a href="https://support.microsoft.com/en-us/windows/how-to-recognize-phishing-email-links-or-phone-calls-0c7a35b3-0b46-4d40-a4be-fce27f75678b" target="_blank">Microsoft's Tips for Avoiding Phishing Scams</a></li>
                <li><a href="https://www.phishing.org/what-is-phishing" target="_blank">Phishing.org's Guide to Phishing</a></li>
            </ul>
        </div>    
        <form action="/" method="post">
            <input type="text" name="url" placeholder="URL" required="required" />
            <button type="submit" class="btn" onclick="showLoadingSpinner()">Verify URL</button>
        </form>

        {% if output != "NA" %}
        <div class="result">

            {% if output.status == "SUCCESS" %}

            <div class="trust-score">
                {% if output.trust_score >= 0 and output.trust_score < 60 %}
                <span class="low">Trust Score : {{output.trust_score}} / 100</span>
                {% elif output.trust_score >= 60 and output.trust_score < 70 %}
                <span class="medium">Trust Score : {{output.trust_score}} / 100</span>
                {% elif output.trust_score >= 70 and output.trust_score < 90 %}
                <span class="high">Trust Score : {{output.trust_score}} / 100</span>
                {% else %}
                <span class="excellent">Trust Score : {{output.trust_score}} / 100</span>
                {% endif %}
            </div>


            <div class="url-info">
                <p>URL: {{output.url}}</p>
                {% if output.msg is defined %}
                <p>{{output.msg}}</p>
                {% endif %}
            </div>

            {% if output.response_status != False %}

            <div class="preview-buttons">
                <form id="preview" class="preview-form" action="{{ url_for('preview')}}" method="POST" target="_blank">
                    <input type="hidden" name="url" value="{{output.url}}">
                    <button class="preview-button" type="submit">Preview within by using our system</button>
                </form>
                <form id="source-code" class="source-code-form" action="{{ url_for('view_source_code')}}" method="POST" target="_blank">
                    <input type="hidden" name="url" value="{{output.url}}">
                    <button class="preview-button" type="submit">Show Source Code</button>
                </form>
            </div>

            <p class="note">(External scripts are disabled for your safety.)</p>

            {% else %}

            <p class="error">Can not access this page at the moment. Page may be down or may have blocked viewing with scripts.</p>

            {% endif %}

            <div class="info-section">
                <h3>Info for Nerds</h3>

                <div class="info-grid">
                    <div class="info-item">
                        <p class="info-label">Global Rank</p>
                        <p class="info-value">{{output.rank}}</p>
                    </div>

                    <div class="info-item">
                        <p class="info-label">HTTP Status Code</p>
                        <p class="info-value">{{output.response_status}}</p>
                    </div>

                    <div class="info-item">
                        <p class="info-label">Domain Age</p>
                        <p class="info-value">{{output.age}}</p>
                    </div>

                    <div class="info-item">
                        <p class="info-label">Use of URL Shortener</p>
                        <p class="info-value">{% if output.is_url_shortened == 1%} YES {% else %} NO {% endif %}</p>
                    </div>

                    <div class="info-item">
                        <p class="info-label">HSTS Support</p>
                        <p class="info-value">{% if output.hsts_support == 1%} YES {% else %} NO {% endif %}</p>
                    </div>

                    <div class="info-item">
                        <p class="info-label">IP instead of Domain</p>
                        <p class="info-value">{% if output.ip_present == 1%} YES {% else %} NO {% endif %}</p>
                    </div>

                    <div class="info-item">
                        <p class="info-label">URL Redirects</p>
                        <p class="info-value">{% if output.url_redirects == 0%} NO {% else %}  {% for value in output.url_redirects %} {{ value }} &nbsp;{% endfor %} {% endif %}</p>
                    </div>

                    <div class="info-item">
                        <p class="info-label">IP of Domain</p>
                        <p class="info-value">{{output.ip}}</p>
                    </div>

                    <div class="info-item">
                        <p class="info-label">Too Long URL</p>
                        <p class="info-value">{% if output.too_long_url == 1%} YES {% else %} NO {% endif %}</p>
                    </div>

                    <div class="info-item">
                        <p class="info-label">Too Deep URL</p>
                        <p class="info-value">{% if output.too_deep_url == 1%} YES {% else %} NO {% endif %}</p>
                    </div>
                </div>
            </div>

            {% if output.ssl != 0 %}
            <div class="ssl-section">
                <h3>SSL Certificate Details</h3>

                <div class="info-grid">
                    {% for key, value in output.ssl.items() %}
                    <div class="info-item">
                        <p class="info-label">{{ key }}</p>
                        <p class="info-value">{{ value }}</p>
                    </div>
                    {% endfor %}
                </div>
            </div>
            {% endif %}

            <div class="whois-section">
                <h3>WHOIS Data</h3>

                <div class="info-grid">
                    {% for key, value in output.whois.items() %}
                    <div class="info-item">
                        <p class="info-label">{{ key }}</p>
                        <p class="info-value">{{ value }}</p>
                    </div>
                    {% endfor %}
                </div>
            </div>

            {% else %}
            <p>URL: {{output.url}}</p>
            <p>Message: {{output.msg}}</p>
            {% endif %}

        </div>
        {% endif %}

    </div>

    {% endblock %}

</body>

</html>
{% extends "base.html" %}
<!DOCTYPE html>
<html>

<head>
    <title>Website Preview</title>

</head>

<body>
    {% block content %}
    <div id="warning-message">Phishing Attack Prediction System: DON'T CLICK anything till the analysis Complete for legitimate URL.</div>
    <div id="preview-container">
        {{ content | safe }}
    </div>
    {% endblock %}
</body>

</html>

<!DOCTYPE html>
<html>

<head>
    <title>View Source Code</title>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="Dev">
    <meta name="robots" content="noindex, nofollow">

    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}">
    <link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='favicon-32x32.png') }}">
    <link rel="icon" type="image/png" sizes="16x16" href="{{ url_for('static', filename='favicon-16x16.png') }}">
    <link rel="apple-touch-icon" sizes="180x180" href="{{ url_for('static', filename='apple-touch-icon.png') }}">
    <link rel="manifest" href="{{ url_for('static', filename='site.webmanifest') }}">

    <style>
        body {
            background-color: #1a1a1a;
            color: #fff;
            font-family: Consolas, monospace;
            font-size: 16px;
            word-wrap: break-word;
        }
        
        pre {
            background-color: #000;
            padding: 10px;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
    </style>
</head>

<body>
    <div>
        <h3>Source Code of {{ url }} </h3>
        <pre>{{ formatted_html }}</pre>
    </div>
</body>

</html>

function showLoadingSpinner() {
    var input = document.querySelector('input[name="url"]');
    var button = document.querySelector('button');
    if (input.value.trim() !== '') {
        button.style.display = 'none';
        var spinner = document.createElement('div');
        spinner.className = 'spinner';
        button.parentNode.appendChild(spinner);
    }
}

body {
    background-color: #0d0d0d;
    color: #fff;
    font-family: 'Montserrat', sans-serif;
    display: flex;
    flex-direction: column;
    overflow-x: hidden;
    margin: 0;
    padding: 0;
    min-height: 100vh; /* Ensure the body takes up the full height of the viewport */
    padding-bottom: 3rem; /* Space for the fixed footer */
}

h1 {
    font-size: 4rem;
    margin-top: 8rem;
    margin-bottom: 1rem;
    text-align: center;
    color: #7653ff;
}

.logo {
    text-decoration: none;
    color: inherit;
}

.short-note {
    text-align: center;
    padding: 0 1rem;
    margin-bottom: 2rem;
}

.result {
    max-width: 90%;
    color: inherit;
    text-align: left;
    margin: 0 auto;
    padding: 2rem;
    background-color: #1D1D1D;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
}

form {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin-bottom: 2rem;
}

input[type="text"] {
    border: none;
    border-radius: 4px;
    padding: 1rem 1rem;
    font-size: 1rem;
    background-color: #1D1D1D;
    color: #fff;
    width: 80%;
    max-width: 800px;
    margin-bottom: 1rem;
}

button[type="submit"] {
    border: none;
    border-radius: 4px;
    padding: 0.8rem 2rem;
    font-size: 1rem;
    background-color: #6e49ff;
    color: #fff;
    cursor: pointer;
    transition: background-color 0.2s ease;
}

button[type="submit"]:hover {
    background-color: #623df9;
}

.preview-button {
    border: none;
    border-radius: 4px;
    padding: 0.8rem 1.5rem;
    font-size: 1rem;
    background-color: #4350da;
    color: #fff;
    cursor: pointer;
    margin: 0.5rem;
    transition: background-color 0.2s ease;
}

.preview-button:hover {
    background-color: #623df9;
}

.preview-buttons {
    display: flex;
    justify-content: center;
    margin-bottom: 1rem;
}

.note {
    font-size: 0.9rem;
    color: #888;
    text-align: center;
    margin-bottom: 2rem;
}

.error {
    color: #ff5555;
    font-weight: bold;
    text-align: center;
    margin-bottom: 2rem;
}

.trust-score {
    font-size: 1.5rem;
    font-weight: bold;
    margin-bottom: 1rem;
    text-align: center;
}

.low {
    color: #ff5555;
}

.medium {
    color: #ffaa00;
}

.high {
    color: #aaff00;
}

.excellent {
    color: #00ff00;
}

.url-info {
    margin-bottom: 2rem;
    text-align: center;
}

.info-section,
.ssl-section,
.whois-section {
    margin-bottom: 2rem;
}

.info-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1rem;
}

.info-item {
    background-color: #1D1D1D;
    padding: 1rem;
    border-radius: 4px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.info-label {
    font-weight: bold;
    margin-bottom: 0.5rem;
}

.info-value {
    word-break: break-all;
}

@media (max-width: 768px) {
    .info-grid {
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    }
}

.spinner {
    display: inline-block;
    width: 25px;
    height: 25px;
    border-radius: 50%;
    border: 3px solid #ccc;
    border-top-color: #333;
    animation: spin 1s ease-in-out infinite;
}

@keyframes spin {
    to {
        transform: rotate(360deg);
    }
}

/* New CSS to make the footer always visible at the bottom */
.app-footer {
    background-color: #1D1D1D;
    color: #fff;
    display: flex;
    justify-content: center;
    align-items: center;
    position: fixed;
    bottom: 0;
    left: 0;
    margin-top: 10px;
    z-index: 9999;
    width: 100%;
    height: 4rem;
}

.app-footer a {
    color: #7653ff;
    text-decoration: none;
    transition: color 0.2s ease;
}

.app-footer a:hover {
    color: #6e49ff;
}

from flask import Flask, request, render_template
from bs4 import BeautifulSoup
import requests
from urllib.parse import urljoin
from controller import Controller
import onetimescript
from db import db

app = Flask(__name__)
app.config['SQLALCHEMY_DATABASE_URI'] = 'sqlite:///domains.db'
db.init_app(app)
with app.app_context():
    db.create_all() 

controller = Controller()


@app.route('/',  methods=['GET','POST'])
def home():
    
    try:
        url = request.form['url']
        result = controller.main(url)
        output = result
    except:
        output = 'NA'

    return render_template('index.html', output=output)


@app.route('/preview', methods=['POST'])
def preview():
    try:
        url = request.form.get('url')
        response = requests.get(url)
        soup = BeautifulSoup(response.content, 'html.parser')

        # inject external resources into HTML
        for link in soup.find_all('link'):
            if link.get('href'):
                link['href'] = urljoin(url, link['href'])
        
        # Uncomment this if you want to enable script
        # for script in soup.find_all('script'):
        #     if script.get('src'):
        #         script['src'] = urljoin(url, script['src'])

        for img in soup.find_all('img'):
            if img.get('src'):
                img['src'] = urljoin(url, img['src'])

        return render_template('preview.html', content=soup.prettify())
    except Exception as e:
        return  f"Error: {e}"


@app.route('/source-code', methods=['GET','POST'])
def view_source_code():

    try:
        url = request.form.get('url')
        response = requests.get(url)
        soup = BeautifulSoup(response.content, 'html.parser')
        formatted_html = soup.prettify()
        
        return render_template('source_code.html', formatted_html = formatted_html, url = url)
    
    except Exception as e:
        return  f"Error: {e}"

@app.route('/update-db')
def update_db(): 
    try:
        with app.app_context():
            response = onetimescript.update_db()
            print("Database populated successfully!")
            return response, 200
    except Exception as e:
        print(f"An error occurred: {str(e)}")
        return "An error occurred: " + str(e), 500

@app.route('/update-json')
def update_json(): 
    try:
        with app.app_context():
            response = onetimescript.update_json()
            print("JSON updated successfully!")
            return response, 200
    except Exception as e:
        print(f"An error occurred: {str(e)}")
        return "An error occurred: " + str(e), 500


if __name__ == '__main__':
    app.debug = True
    app.run()


  